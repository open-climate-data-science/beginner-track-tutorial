---
title: "Beginner Tutorial"
author: "Livia Popa & Nick Gawron"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(ggplot2)
library(tidyverse)
library(rnoaa)
library(lubridate)
# uploads library info
```


## Open Data Science

## What is Open Data and Reproducible Science?

Open data documents and shares research data openly for re-use.

Open data research aims to transform research by pushing change in the way that research is carried out and disseminated by digital tools. Open data should be:

- Publicly available: Open data is freely available on the internet.
- Reusable: Proper licensing is essential for research outputs so that users know any limitations on re-use
- Transparent: With appropriate metadata to explain how research output was produced and what it contains


## Importing Data From Cardinals

- Cardinal is a high-powered, user-oriented, one-stop-shop for North Carolina weather and climate data housed at the North Carolina State Climate Office. 
- Cardinal makes weather and climate data more accessible to users, with features and prompts that take the guesswork out of station and parameter identification and selection.

## Using data inspection functions

### Data Types

- Date
- Str
- Char
- Double 
- Num

```{r}
library(readr)
cardinal <- read_csv("cardinal_data.csv")
#cardinal%>%filter(colnames(cardinal)!="MV")
```


```{r echo=F}
cardinal <- read_csv("cardinal_data.csv", 
     col_types = list(`Average Air Temperature (F)` = col_number(), 
         `Maximum Air Temperature (F)` = col_number(), 
         `Minimum Air Temperature (F)` = col_number(), 
         `Average Experimental Leaf Wetness (mV)` = col_number(), 
         `Total Precipitation (in)` = col_number(), 
         `Average Relative Humidity (%)` = col_number(), 
         `Average Soil Moisture (m3/m3)` = col_number(), 
         `Average Soil Temperature (F)` = col_number(), 
         `Average Solar Radiation (W/m2)` = col_number(), 
         `Average Station Pressure (mb)` = col_number()))

```

### Cleaning Data 


- usually a lot more messy 
- R can handle a lot of small details 


```{r}

# drop rows of missing values 
cardinal<-drop_na(cardinal)

#determine data types of all cols 
str(cardinal)

#create a date 
cardinal$Date<-as.Date(cardinal$Date, tryFormats= c("%m/%d/%y"))
view(cardinal)

#changes col names
colnames(cardinal)=c("date","AvgT","MaxT","MinT","AvgLw","Tprep","AvgHum","AvgSm","AvgSt","AvgSr","AvgStp")
```


## Making new Data

### When does it Rain ? 

```{r}
#me making new data

cardinal$IfRain<- (cardinal$Tprep>0)
cardinal$IfRain<-as.factor(as.integer(cardinal$IfRain))
cardinal

```



### Month Factor variable

- Factor variable is a category or bin we can place a value in. 

```{r}

# month variable 
cardinal$month<-month(cardinal$date)
cardinal$month<-as.factor(cardinal$month)

# str factor
str(cardinal)
```


###  Numerical Variable, Rain Difference

- Dollar sign + "Name of Variable"

```{r}
cardinal$TDiff <- cardinal$MaxT-cardinal$MinT
```



## Numerical Summaries


- Help us determine basic trends in data from printouts. 

- Summary gives as a 5 number summary of numeric variables

- Basic counts of factor variables

```{r}
summary(cardinal)
```

- Frequency Table to compare categorical / factor variables.

```{r}
# Frequency Table 
table(cardinal$month,cardinal$IfRain)
```





## Plotting Basic 


- Simple visual of frequency count

```{r}
# base plots in R, categorical variables
#does a count
plot(cardinal$IfRain)
```




- We will be using a package called ggplot2.


- Here is a good link: https://www.rstudio.com/resources/cheatsheets/

- Note we have not even had a title or label specs yet 

```{r}
ggplot(cardinal,aes(x= date ,y= AvgLw))+ geom_point()
#col=month
```


```{r}
#livia
ggplot(cardinal,aes(x=AvgT)) + geom_histogram(color="green",fill="orange")+labs(x="Average Temperature", y="Day",title ="Histogram of Average Temperature in Lake Wheeler")

#ggplot(cardinal,aes(x=date,y=AvgT,fill=IfRain))+geom_area()
```


```{r}
#me 
ggplot(cardinal,aes(x=date,y=AvgT))+geom_line()+labs(title="Total Daily Rainfall by Date",y="Average Tempurature (F) ")
```

- Observe correlation and possible trend numerical variables

- options are very versatile inside a +geom_statement

```{r}
ggplot(cardinal,aes(x=AvgHum,y=AvgLw))+geom_point()

# coloring by month to observe trends
ggplot(cardinal,aes(x=AvgHum,y=AvgLw))+geom_point(aes(col=month))
```



```{r}

# + geom_boxplot is a great tool to observe spreads

ggplot(cardinal,aes(x=month , y = TDiff))+geom_boxplot()
```

